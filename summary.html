<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* ======================================= */
        /* === 1. BASE STYLES & TYPOGRAPHY === */
        /* ======================================= */
        body {
            font-family: 'Kanit', sans-serif;
            background-color: #f1e9d9;
            color: #333;
            margin: 0;
            padding: 15px;
            padding-bottom: 120px;
        }
        .container {
            max-width: 960px;
            margin: auto;
            padding: 0 5px;
        }
        h1 {
            color: #940109;
            text-align: center;
            font-size: 2em;
            margin-bottom: 25px;
            padding-bottom: 10px;
            border-bottom: 3px solid #940109;
        }
        
        /* === INSTRUCTION BOX STYLE === */
        .screenshot-instruction {
            border: 3px solid #940109; 
            background-color: #ffe0b2; 
            color: #940109; 
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 10px;
            text-align: center;
            font-size: 1.3em; 
            font-weight: 700;
        }

        /* === NEW FORM STYLES === */
        .customer-form-box {
            background-color: #fff;
            border: 2px solid #940109;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .customer-form-box h2 {
            color: #940109;
            font-size: 1.5em;
            margin-top: 0;
            margin-bottom: 15px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            font-weight: 700;
            margin-bottom: 5px;
            color: #555;
        }
        .required-star {
            color: red;
        }
        
        /* *** FLEX LAYOUT FOR NAME/PHONE *** */
        .form-row {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }
        .form-row .form-group {
            flex: 1;
            margin-bottom: 0; 
        }
        /* *************************************** */

        .form-group input[type="text"],
        .form-group input[type="tel"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-family: 'Kanit', sans-serif;
            font-size: 1em;
            box-sizing: border-box;
        }
        .radio-group label {
            margin-right: 20px;
            font-weight: 400;
            color: #333;
            padding: 8px 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            display: inline-block;
            transition: all 0.2s;
        }
        .radio-group input[type="radio"]:checked + label {
            background-color: #940109;
            color: white;
            border-color: #940109;
            font-weight: 700;
        }
        .radio-group input[type="radio"] {
            display: none;
        }
        
        /* === DELIVERY ADDRESS FIELD (‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡∏≠‡∏≠‡∏Å‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß) === */
        
        /* ======================================= */
        /* === 2. CART ITEM STYLES === */
        /* ======================================= */
        .cart-item {
            background-color: #fff;
            border: 1px solid #e0c8a6;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            padding-bottom: 5px;
            border-bottom: 1px dashed #ccc;
        }
        .item-name {
            font-size: 1.3em;
            font-weight: 700;
            color: #940109;
            flex-grow: 1;
        }
        .item-actions {
            display: flex;
            gap: 10px;
            align-items: center;
            flex-shrink: 0;
        }
        .item-qty-price {
            font-size: 1.2em;
            font-weight: 700;
            color: #4CAF50;
            white-space: nowrap;
        }
        .remove-btn {
            background-color: #f44336;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 8px 12px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 700;
            transition: background-color 0.2s;
        }
        .remove-btn:hover {
            background-color: #d32f2f;
        }

        /* ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î */
        .details-box {
            background-color: #fcfcfc;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            border-left: 3px solid #ccc;
        }
        .details-box h3 {
            font-size: 1em;
            font-weight: 700;
            color: #333;
            margin-top: 0;
            margin-bottom: 5px;
        }
        .details-box ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .details-box li {
            display: flex;
            justify-content: space-between;
            font-size: 0.95em;
            padding: 3px 0;
            border-bottom: 1px dotted #eee;
        }
        .detail-price {
            font-weight: 700;
            color: #555;
        }

        /* ======================================= */
        /* === 5. FIXED FOOTER & TOTAL === */
        /* ======================================= */
        .footer-fixed {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: #fff;
            border-top: 3px solid #940109;
            box-shadow: 0 -4px 10px rgba(0,0,0,0.1);
            padding: 15px 0;
            box-sizing: border-box;
            z-index: 100;
        }
        .summary-bar {
            max-width: 960px;
            margin: auto;
            padding: 0 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 10px;
        }
        .grand-total-display {
            font-size: 1.5em;
            font-weight: 700;
            color: #940109;
            flex-basis: 30%;
            text-align: left;
        }
        .summary-bar button {
            border: none;
            border-radius: 8px;
            padding: 12px 15px;
            font-size: 1.1em;
            font-weight: 700;
            cursor: pointer;
            transition: 0.2s;
            flex: 1;
        }
        .checkout-button {
            background-color: #4CAF50;
            color: #fff;
        }
        .checkout-button:hover {
            background-color: #388e3c;
        }
        .add-more-button {
            background-color: #2196f3;
            color: #fff;
        }
        .add-more-button:hover {
            background-color: #1e88e5;
        }

        /* === FINAL ORDER OVERLAY === */
        #final-summary-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            display: none;
            justify-content: center;
            align-items: center;
        }
        .summary-popup {
            background-color: #fff;
            padding: 25px;
            border-radius: 10px;
            max-width: 90%;
            width: 500px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            text-align: left;
        }
        .summary-popup h3 {
            color: #940109;
            text-align: center;
            margin-top: 0;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 10px;
            font-size: 1.4em;
        }
        #chat-order-text {
            width: 100%;
            height: 300px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-family: 'Kanit', sans-serif;
            font-size: 1em;
            resize: none;
            background-color: #f7f7f7;
            cursor: text;
        }
        .popup-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
        }
        .popup-actions button {
            padding: 10px 20px;
            border-radius: 5px;
            font-size: 1.1em;
            cursor: pointer;
            transition: 0.2s;
            border: none;
        }
        #copy-button {
            background-color: #007bff;
            color: white;
        }
        #copy-button:hover {
            background-color: #0056b3;
        }
        
        #chat-link-button {
            background-color: #f0f0f0; 
            color: #999;
            border: 1px solid #ccc;
            cursor: not-allowed;
            border-radius: 5px; 
            font-size: 1.1em;
            padding: 10px 20px;
        }
        #chat-link-button.active {
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }
        #chat-link-button.active:hover {
            background-color: #388e3c;
        }
        
        /* Responsive */
        @media (max-width: 600px) {
            
            .form-row {
                flex-direction: column; 
                gap: 0;
            }
            .form-row .form-group {
                margin-bottom: 15px;
            }

            .summary-bar {
                flex-direction: column;
                gap: 10px;
            }
            .summary-bar button {
                width: 100%;
                flex: none;
            }
            .grand-total-display {
                width: 100%;
                text-align: center;
                flex-basis: auto;
            }
            .item-header {
                flex-wrap: wrap;
            }
            .item-name {
                flex-basis: 100%;
                margin-bottom: 5px;
            }
            .item-actions {
                width: 100%;
                justify-content: space-between;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        
        <div class="screenshot-instruction">
            ‚ö†Ô∏è‚ö†Ô∏è‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏°‡∏ô‡∏π‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á‚ö†Ô∏è‚ö†Ô∏è <br> ‡∏Å‡∏î‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß-‡∏ß‡∏≤‡∏á‡πÉ‡∏ô‡πÅ‡∏ä‡∏ó‡∏ô‡∏∞‡∏Ñ‡∏∞üíó
        </div>

        <h1>üõí ‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h1>

        <div class="customer-form-box">
            <h2>üìù ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h2>
            <form id="customer-info-form">
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="customer-name">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö (‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô) <span class="required-star">*</span></label>
                        <input type="text" id="customer-name" name="customerName" required placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏ô‡πâ‡∏≠‡∏á‡∏≠‡∏¥‡∏á, ‡∏û‡∏µ‡πà‡πÄ‡∏™‡πá‡∏á">
                    </div>
                    <div class="form-group">
                        <label for="customer-phone">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ <span class="required-star">*</span></label>
                        <input type="tel" id="customer-phone" name="customerPhone" required placeholder="08xxxxxxxx">
                    </div>
                </div>
                <div class="form-group">
                    <label>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ <span class="required-star">*</span></label>
                    <div class="radio-group">
                        <input type="radio" id="dinein-radio" name="service-type" value="‡∏ó‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏£‡πâ‡∏≤‡∏ô" checked>
                        <label for="dinein-radio">üçΩÔ∏è ‡∏ó‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏£‡πâ‡∏≤‡∏ô</label>
                        
                        <input type="radio" id="takeaway-radio" name="service-type" value="‡∏™‡∏±‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô">
                        <label for="takeaway-radio">ü•° ‡∏™‡∏±‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô (Takeaway)</label>
                        
                        <input type="radio" id="delivery-radio" name="service-type" value="‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡πÄ‡∏î‡∏•‡∏¥‡πÄ‡∏ß‡∏≠‡∏£‡∏µ‡πà">
                        <label for="delivery-radio">üõµ ‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡πÄ‡∏î‡∏•‡∏¥‡πÄ‡∏ß‡∏≠‡∏£‡∏µ‡πà</label>
                    </div>
                    <small style="display: block; margin-top: 10px; color: #940109; font-weight: 700;">
                        *‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏î‡∏•‡∏¥‡πÄ‡∏ß‡∏≠‡∏£‡∏µ‡πà ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡πÅ‡∏•‡πâ‡∏ß ‡∏£‡∏ö‡∏Å‡∏ß‡∏ô‡∏™‡πà‡∏á **‡∏û‡∏¥‡∏Å‡∏±‡∏î GPS ‡∏´‡∏£‡∏∑‡∏≠ Plus Code** ‡πÉ‡∏ô‡πÅ‡∏ä‡∏ó ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏™‡πà‡∏á
                    </small>
                </div>
                </form>
        </div>
        
        <div id="cart-list">
            </div>

        <div id="empty-cart" style="display: none; text-align: center; font-size: 1.2em; color: #940109; padding: 20px;">
            ‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏õ‡∏•‡πà‡∏≤ üß∫ü•≤ <br>
            <a href="index.html" style="color: #2196f3; font-weight: 700;">‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a>
        </div>
    </div>

    <div class="footer-fixed">
        <div class="summary-bar">
            <button class="add-more-button" onclick="continueShopping()">
                ‚ûï ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏∑‡πà‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°
            </button>
            <div class="grand-total-display">
                ‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°: <span id="grand-total">0</span> ‡∏ö.
            </div>
            <button class="checkout-button" onclick="checkout()">
                ‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏±‡πà‡∏á‡πÉ‡∏ô‡πÅ‡∏ä‡∏ó
            </button>
        </div>
    </div>

    <div id="final-summary-overlay">
        <div class="summary-popup">
            <h3>‚úÖ ‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</h3>
            <p>‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏ô‡∏µ‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡∏ß‡∏≤‡∏á‡πÉ‡∏ô‡πÅ‡∏ä‡∏ó‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤</p>
            <textarea id="chat-order-text" readonly></textarea>
            <div class="popup-actions">
                <button id="copy-button" onclick="copyOrderText()">‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°</button>
                <button id="chat-link-button" onclick="redirectToChat()" disabled>‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ï‡πà‡∏≠‡πÉ‡∏ô‡πÅ‡∏ä‡∏ó</button>
            </div>
        </div>
    </div>
    <script>
    // ------------------ GLOBAL STATE ------------------
    let grandTotal = 0; 
    let cartItems = [];

    // ------------------ (‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô toggleDeliveryAddress ‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡∏≠‡∏≠‡∏Å) ------------------

    // ------------------ 1. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÇ‡∏´‡∏•‡∏î‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (‡πÉ‡∏ä‡πâ sessionStorage) ------------------
    function loadCart() {
        // *** ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç: ‡πÉ‡∏ä‡πâ sessionStorage ‡πÅ‡∏ó‡∏ô localStorage ***
        cartItems = JSON.parse(sessionStorage.getItem('cartItems') || '[]');
        const cartList = document.getElementById('cart-list');
        grandTotal = 0;
        
        cartList.innerHTML = ''; 

        if (cartItems.length === 0) {
            document.getElementById('empty-cart').style.display = 'block';
            document.getElementById('grand-total').innerText = '0';
            document.querySelector('.customer-form-box').style.display = 'none';
            return;
        }

        document.getElementById('empty-cart').style.display = 'none';
        document.querySelector('.customer-form-box').style.display = 'block';


        cartItems.forEach((item, index) => {
            // ‡∏ï‡πâ‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏°‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ô‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞ item ‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ‡πÅ‡∏•‡πâ‡∏ß
            // ‡πÉ‡∏ô‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏Ñ‡πâ‡∏î‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô item.price ‡∏Ñ‡∏∑‡∏≠‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡πâ‡∏ô‡πÜ
            const itemTotal = item.price;
            grandTotal += itemTotal; 

            const itemDiv = document.createElement('div');
            itemDiv.className = 'cart-item';
            
            // --- A. ‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏±‡∏ß‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏´‡∏•‡∏±‡∏Å ---
            itemDiv.innerHTML = `
                <div class="item-header">
                    <span class="item-name">${item.name}</span>
                    <div class="item-actions">
                        <span class="item-qty-price">
                            ${item.count > 1 ? `${item.count} ‡∏ä‡∏∏‡∏î |` : ''} ${itemTotal.toLocaleString()} ‡∏ö.
                        </span>
                        <button class="remove-btn" onclick="removeItem(${index})">‡∏•‡∏ö</button>
                    </div>
                </div>
            `;
            
            // --- B. ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏¢‡πà‡∏≠‡∏¢/‡∏ó‡πá‡∏≠‡∏õ‡∏õ‡∏¥‡πâ‡∏á
            // *** ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç: ‡πÄ‡∏û‡∏¥‡πà‡∏° item.isDrinkSet ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÉ‡∏ô‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç ***
            if ((item.isSukiSet || item.isNoodleSet || item.isDrinkSet) && item.details) {
                let detailsHtml = `
                    <div class="details-box ${item.isNoodleSet ? 'noodle' : ''}">
                        <h3>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏¢‡πà‡∏≠‡∏¢/‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á:</h3>
                        <ul>
                `;

                item.details.forEach(detail => {
                    // 1. ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏•‡∏±‡∏Å‡πÅ‡∏•‡∏∞‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô
                    let detailNameDisplay = detail.name + (detail.spice ? ` (‡πÄ‡∏ú‡πá‡∏î: ${detail.spice})` : '');
                    let detailIcon;
                    let displayQuantity = ` x${detail.count}`; // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Suki/Noodle

                    // 2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏ä‡∏∏‡∏î‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
                    if (item.isDrinkSet && detail.type === 'Drink') {
                        detailIcon = 'ü•§';
                        // ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°, ‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏ô detail.name ‡∏ñ‡∏π‡∏Å‡∏à‡∏±‡∏î‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÄ‡∏õ‡πá‡∏ô "‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ x ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô" ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß
                        displayQuantity = ''; // ‡∏•‡∏ö x{count} ‡∏ã‡πâ‡∏≥‡∏ã‡πâ‡∏≠‡∏ô‡∏≠‡∏≠‡∏Å
                    } else {
                        // ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏∏‡∏Å‡∏µ‡πâ/‡∏°‡∏≤‡∏°‡πà‡∏≤
                        detailIcon = item.isSukiSet ? (detail.type === 'Main' ? 'üç≤' : 'üç°') : 'üëâ'; 
                    }

                    const totalDetailPrice = detail.price * detail.count;
                    const priceDisplay = totalDetailPrice > 0 ? totalDetailPrice.toLocaleString() : '0';

                    detailsHtml += `
                        <li>
                            <span>${detailIcon} ${detailNameDisplay}${displayQuantity}</span> 
                            <span class="detail-price">${priceDisplay} ‡∏ö.</span>
                        </li>
                    `;
                });

                detailsHtml += `
                        </ul>
                    </div>
                `;
                itemDiv.innerHTML += detailsHtml;
            }

            cartList.appendChild(itemDiv);
        });

        document.getElementById('grand-total').innerText = grandTotal.toLocaleString();
    }

    // ------------------ 2. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (‡πÉ‡∏ä‡πâ sessionStorage) ------------------
    function removeItem(index) {
        // *** ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç: ‡πÉ‡∏ä‡πâ sessionStorage ‡πÅ‡∏ó‡∏ô localStorage ***
        let cartItems = JSON.parse(sessionStorage.getItem('cartItems') || '[]');
        
        if (index < 0 || index >= cartItems.length) {
            console.error("Invalid item index.");
            return;
        }

        if (confirm(`‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ "${cartItems[index].name}" ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?`)) {
            cartItems.splice(index, 1); 
            // *** ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç: ‡πÉ‡∏ä‡πâ sessionStorage ‡πÅ‡∏ó‡∏ô localStorage ***
            sessionStorage.setItem('cartItems', JSON.stringify(cartItems));
            loadCart(); 
        }
    }
    
    // ------------------ 3. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏∏‡πà‡∏° '‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏∑‡πà‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°' ------------------
    function continueShopping() {
        window.location.href = 'index.html'; 
    }


    // ------------------ 4. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ (‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç: ‡∏•‡∏ö deliveryAddress) ------------------
    function generateOrderText(customerName, customerPhone, serviceType) { 
        let text = '========================\n';
        text += 'üì¢ **‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡πÉ‡∏´‡∏°‡πà (‡∏à‡∏¥‡∏à‡∏∞ ‡πÄ‡∏Æ‡∏á‡πÄ‡∏Æ‡∏á)**\n';
        text += '========================\n\n';

        // 1. ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤
        text += '*** üíóüë§ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ***\n';
        text += `‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö: ${customerName}\n`;
        text += `‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£: ${customerPhone}\n`;
        text += `‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó: ${serviceType}\n`;
        
        // **‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç: ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏î‡∏•‡∏¥‡πÄ‡∏ß‡∏≠‡∏£‡∏µ‡πà‡∏ó‡∏±‡∏ô‡∏ó‡∏µ**
        if (serviceType === '‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡πÄ‡∏î‡∏•‡∏¥‡πÄ‡∏ß‡∏≠‡∏£‡∏µ‡πà') {
            text += `\n**!! ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç !!** ‡∏£‡∏ö‡∏Å‡∏ß‡∏ô‡∏™‡πà‡∏á **‡∏û‡∏¥‡∏Å‡∏±‡∏î GPS ‡∏´‡∏£‡∏∑‡∏≠ Plus Code** ‡πÉ‡∏ô‡πÅ‡∏ä‡∏ó ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏™‡πà‡∏á\n`;
        }
        text += '\n';

        // 2. ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
        text += '*** üìã ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£ ***\n';
        cartItems.forEach((item, index) => {
            const itemTotal = item.price;
            text += `--------------------------------\n`;
            text += `${index + 1}. ${item.name} (x${item.count}) : ${itemTotal.toLocaleString()} ‡∏ö.\n`;
            
            if (item.details) {
                text += `  > ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î:\n`;
                item.details.forEach(detail => {
                    let detailNameDisplay = detail.name + (detail.spice ? ` (‡πÄ‡∏ú‡πá‡∏î: ${detail.spice})` : '');
                    let displayQuantity = ` x${detail.count}`;
                    
                    if (item.isDrinkSet && detail.type === 'Drink') {
                        // ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°, ‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏ô detail.name ‡∏ñ‡∏π‡∏Å‡∏à‡∏±‡∏î‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÄ‡∏õ‡πá‡∏ô "‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ x ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô" ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß
                        displayQuantity = ''; // ‡∏•‡∏ö x{count} ‡∏ã‡πâ‡∏≥‡∏ã‡πâ‡∏≠‡∏ô‡∏≠‡∏≠‡∏Å
                    }

                    const totalDetailPrice = detail.price * detail.count;
                    const priceDisplay = totalDetailPrice > 0 ? ` (${totalDetailPrice.toLocaleString()} ‡∏ö.)` : '';
                    text += `    - ${detailNameDisplay}${displayQuantity}${priceDisplay}\n`;
                });
            }
        });
        text += '========================\n';

        // 3. ‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°
        text += `\n**üí∞ ‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: ${grandTotal.toLocaleString()} ‡∏ö‡∏≤‡∏ó**\n`;
        text += '=======Thank youüôè=======\n';

        return text;
    }


    // ------------------ 5. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á Pop-up (‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç: ‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà) ------------------
    function checkout() {
        if (cartItems.length === 0) {
            alert('‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏õ‡∏•‡πà‡∏≤ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π');
            return;
        }

        const customerName = document.getElementById('customer-name').value.trim();
        const customerPhone = document.getElementById('customer-phone').value.trim();
        const serviceType = document.querySelector('input[name="service-type"]:checked').value;
        
        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (Validation)
        if (!customerName || !customerPhone) {
            alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô');
            document.getElementById('customer-info-form').reportValidity(); 
            return;
        }
        
        // **‡∏ñ‡∏π‡∏Å‡∏•‡∏ö: ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏î‡∏•‡∏¥‡πÄ‡∏ß‡∏≠‡∏£‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡∏≠‡∏≠‡∏Å‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß**

        // 1. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏£‡∏∏‡∏õ
        const orderText = generateOrderText(customerName, customerPhone, serviceType); 
        
        // 2. ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÉ‡∏ô Pop-up
        document.getElementById('chat-order-text').value = orderText;
        document.getElementById('final-summary-overlay').style.display = 'flex';
        
        // 3. ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ï‡πà‡∏≠‡πÉ‡∏ô‡πÅ‡∏ä‡∏ó‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏õ‡πá‡∏ô disabled
        const chatButton = document.getElementById('chat-link-button');
        chatButton.disabled = true;
        chatButton.classList.remove('active');
        chatButton.innerText = "‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ï‡πà‡∏≠‡πÉ‡∏ô‡πÅ‡∏ä‡∏ó";
    }


    // ------------------ 6. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° ------------------
    function copyOrderText() {
        const copyText = document.getElementById("chat-order-text");
        copyText.select();
        copyText.setSelectionRange(0, 99999); 
        document.execCommand("copy");
        
        // ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ï‡πà‡∏≠‡πÉ‡∏ô‡πÅ‡∏ä‡∏ó
        const chatButton = document.getElementById('chat-link-button');
        chatButton.disabled = false;
        chatButton.classList.add('active'); 
        chatButton.innerText = "‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ï‡πà‡∏≠‡πÉ‡∏ô‡πÅ‡∏ä‡∏ó (‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà!)";
    }

    // ------------------ 7. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ï‡πà‡∏≠‡πÉ‡∏ô‡πÅ‡∏ä‡∏ó (‡πÉ‡∏ä‡πâ sessionStorage) ------------------
    function redirectToChat() {
        const chatButton = document.getElementById('chat-link-button');
        
        if (chatButton.disabled) {
             alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏î "‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°" ‡∏Å‡πà‡∏≠‡∏ô‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠');
             return;
        }

        // *** ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç: ‡∏•‡πâ‡∏≤‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏à‡∏≤‡∏Å sessionStorage ***
        sessionStorage.removeItem('cartItems'); 
        
        // ‡∏ô‡∏≥‡∏ó‡∏≤‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÅ‡∏ä‡∏ó
        window.location.href = 'https://m.me/727234960462724';
    }


    // 8. ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤
    document.addEventListener('DOMContentLoaded', () => {
        loadCart();
        // ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏Å toggleDeliveryAddress() ‡πÅ‡∏•‡πâ‡∏ß
    });
</script>
</body>
</html>