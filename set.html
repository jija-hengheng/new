<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏à‡∏¥‡∏à‡∏∞ ‡πÄ‡∏Æ‡∏á‡πÄ‡∏Æ‡∏á - ‡∏™‡∏±‡πà‡∏á‡πÄ‡∏•‡∏¢</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary-red: #940109; --bg-cream: #f1e9d9; --success: #4CAF50; }
        body { font-family: 'Kanit', sans-serif; background-color: var(--bg-cream); margin: 0; padding: 10px; padding-bottom: 120px; }
        h2 { color: var(--primary-red); text-align: center; margin: 15px 0; border-bottom: 2px solid var(--primary-red); width: 100%; padding-bottom: 5px; font-size: 1.2rem; }
        
        /* Grid 2 ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å */
        .menu-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; max-width: 600px; margin: auto; }
        
        /* Grid 4 ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡πâ‡∏≥‡∏à‡∏¥‡πâ‡∏° */
        .sauce-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 6px; max-width: 600px; margin: auto; }
        
        .menu-card { background: white; border-radius: 12px; overflow: hidden; display: flex; flex-direction: column; box-shadow: 0 4px 10px rgba(0,0,0,0.1); border: 1px solid #ddd; }
        .menu-card img { width: 100%; aspect-ratio: 1 / 1; object-fit: cover; display: block; background-color: #eee; }
        
        .content { padding: 8px; flex-grow: 1; display: flex; flex-direction: column; }
        .name { font-weight: 700; font-size: 0.85rem; line-height: 1.2; min-height: 2.4em; margin-bottom: 4px; color: #333; }
        .price { color: var(--primary-red); font-weight: 700; font-size: 1rem; margin-bottom: 8px; }

        /* ‡∏õ‡∏£‡∏±‡∏ö‡∏™‡πÑ‡∏ï‡∏•‡πå Card ‡∏ô‡πâ‡∏≥‡∏à‡∏¥‡πâ‡∏°‡πÉ‡∏´‡πâ‡πÄ‡∏•‡πá‡∏Å‡∏û‡∏¥‡πÄ‡∏®‡∏© */
        .sauce-card .content { padding: 4px; }
        .sauce-card .name { font-size: 0.65rem; min-height: 3em; margin-bottom: 2px; }
        .sauce-card .price { font-size: 0.8rem; margin-bottom: 4px; }
        .sauce-card .add-btn { padding: 5px; font-size: 0.65rem; border-radius: 4px; }

        /* ‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ô‡πâ‡∏≥‡∏ã‡∏∏‡∏õ */
        .opt-title { font-size: 0.75rem; font-weight: 700; color: #666; margin-top: 5px; margin-bottom: 4px; }
        .soup-wrap { display: flex; flex-direction: column; gap: 4px; margin-bottom: 8px; }
        .soup-btn { font-size: 0.65rem; padding: 6px; border: 1px solid #ccc; border-radius: 6px; background: #fff; cursor: pointer; text-align: center; }
        .soup-btn.active { background: #fff5f5; border-color: var(--primary-red); color: var(--primary-red); font-weight: 700; }

        /* ‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ú‡πá‡∏î */
        .spicy-wrap { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 3px; margin-top: 5px; margin-bottom: 10px; }
        .sp-btn { font-size: 0.6rem; padding: 4px 0; border: 1px solid #eee; border-radius: 4px; text-align: center; cursor: pointer; background: #fafafa; }
        .sp-btn.active { background: var(--primary-red); color: white; border-color: var(--primary-red); }

        .add-btn { width: 100%; padding: 10px; background: var(--success); color: white; border: none; border-radius: 8px; font-weight: 700; cursor: pointer; font-size: 0.85rem; margin-top: auto; }
        
        .cart-bar { position: fixed; bottom: 15px; left: 50%; transform: translateX(-50%); width: 92%; max-width: 500px; background: var(--primary-red); color: white; padding: 12px 20px; border-radius: 50px; display: flex; justify-content: space-between; align-items: center; text-decoration: none; box-shadow: 0 8px 20px rgba(0,0,0,0.3); z-index: 1000; }
    </style>
</head>
<body>

    <h2>üèÆ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡∏ä‡∏∏‡∏î‡πÄ‡∏ã‡∏ï</h2>
    <div class="menu-grid" id="main-menu"></div>

    <h2>üçÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ô‡πâ‡∏≥‡∏à‡∏¥‡πâ‡∏° (‡πÅ‡∏ñ‡∏ß‡∏•‡∏∞ 4)</h2>
    <div class="sauce-grid" id="sauce-menu"></div>

    <a href="summary.html" class="cart-bar">
        <span style="font-weight:700;">üõí ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</span>
        <span><span id="cart-count">0</span> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ ></span>
    </a>

    <script>
        const mainItems = [
            { id: 1, name: '‡∏ä‡∏∏‡∏î‡∏≠‡∏¥‡πà‡∏°‡∏à‡∏π ‡∏™‡∏∏‡∏î‡∏Ñ‡∏∏‡πâ‡∏°', price: 69, img: 'images/11.png' },
            { id: 2, name: '‡∏ä‡∏∏‡∏î‡∏™‡∏≤‡∏¢‡∏´‡∏°‡∏π', price: 79, img: 'images/9.png' },
            { id: 3, name: '‡∏ä‡∏∏‡∏î‡∏ï‡∏¥‡∏î‡πÄ‡∏ó‡∏£‡∏ô', price: 99, img: 'images/10.png' },
            { id: 4, name: '‡∏ä‡∏∏‡∏î‡∏£‡∏ß‡∏°‡∏´‡∏±‡∏ß‡∏õ‡∏≤‡∏£‡πå‡∏ï‡∏µ‡πâ', price: 199, img: 'images/12.png' }
        ];

        const sauceItems = [
            { id: 101, name: '‡∏ô‡πâ‡∏≥‡∏à‡∏¥‡πâ‡∏°‡∏á‡∏≤‡∏Ñ‡∏±‡πà‡∏ß‡∏´‡∏°‡πà‡∏≤‡∏•‡πà‡∏≤ (‡∏Ç‡∏ß‡∏î)', price: 69, img: 'images/mala_sauce.png' },
            { id: 102, name: '‡∏ô‡πâ‡∏≥‡∏à‡∏¥‡πâ‡∏°‡∏™‡∏∏‡∏Å‡∏µ‡πâ‡∏Å‡∏ß‡∏≤‡∏á‡∏ï‡∏∏‡πâ‡∏á', price: 12, img: 'images/N-suki.png' },
            { id: 103, name: '‡∏ô‡πâ‡∏≥‡∏à‡∏¥‡πâ‡∏°‡∏á‡∏≤‡∏Ñ‡∏±‡πà‡∏ß‡∏´‡∏°‡πà‡∏≤‡∏•‡πà‡∏≤', price: 29, img: 'images/N-mala.png' },
            { id: 104, name: '‡∏ô‡πâ‡∏≥‡∏à‡∏¥‡πâ‡∏°‡∏á‡∏≤‡∏Ñ‡∏±‡πà‡∏ß‡∏´‡∏≠‡∏°(‡∏Ç‡∏≤‡∏ß)', price: 29, img: 'images/N-vha.png' }
        ];

        let cart = JSON.parse(sessionStorage.getItem('cartItems') || '[]');

        function renderMain() {
            document.getElementById('main-menu').innerHTML = mainItems.map(item => `
                <div class="menu-card" id="card-${item.id}">
                    <img src="${item.img}">
                    <div class="content">
                        <div class="name">${item.name}</div>
                        <div class="price">${item.price}.-</div>
                        
                        <div class="opt-title">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ã‡∏∏‡∏õ:</div>
                        <div class="soup-wrap">
                            <div class="soup-btn active" onclick="selectSoup(${item.id}, '‡∏ô‡πâ‡∏≥‡∏ã‡∏∏‡∏õ‡∏î‡∏≥', 0, this)">‡∏ô‡πâ‡∏≥‡∏ã‡∏∏‡∏õ‡∏î‡∏≥ (+0)</div>
                            <div class="soup-btn" onclick="selectSoup(${item.id}, '‡∏ô‡πâ‡∏≥‡∏ã‡∏∏‡∏õ‡∏´‡∏°‡πà‡∏≤‡∏•‡πà‡∏≤‡∏î‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏¥‡∏°', 0, this)">‡∏´‡∏°‡πà‡∏≤‡∏•‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏° (+0)</div>
                            <div class="soup-btn" onclick="selectSoup(${item.id}, '‡∏ô‡πâ‡∏≥‡∏ã‡∏∏‡∏õ‡∏´‡∏°‡πà‡∏≤‡∏•‡πà‡∏≤‡∏ô‡πâ‡∏≥‡∏Ç‡πâ‡∏ô', 10, this)">‡∏´‡∏°‡πà‡∏≤‡∏•‡πà‡∏≤‡∏Ç‡πâ‡∏ô (+10)</div>
                            <div class="soup-btn" onclick="selectSoup(${item.id}, '‡∏ô‡πâ‡∏≥‡∏ã‡∏∏‡∏õ‡∏´‡∏°‡πà‡∏≤‡∏•‡πà‡∏≤‡∏ô‡πâ‡∏≥‡∏Ç‡πâ‡∏ô‡∏ô‡πâ‡∏≥‡∏î‡∏≥', 10, this)">‡∏Ç‡πâ‡∏ô‡∏ô‡πâ‡∏≥‡∏î‡∏≥ (+10)</div>
                        </div>

                        <div id="spicy-section-${item.id}" style="display:none;">
                            <div class="opt-title">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ú‡πá‡∏î:</div>
                            <div class="spicy-wrap">
                                <div class="sp-btn active" onclick="selectSpicy(this)">‡∏ô‡πâ‡∏≠‡∏¢</div>
                                <div class="sp-btn" onclick="selectSpicy(this)">‡∏Å‡∏•‡∏≤‡∏á</div>
                                <div class="sp-btn" onclick="selectSpicy(this)">‡∏°‡∏≤‡∏Å</div>
                            </div>
                        </div>

                        <button class="add-btn" onclick="addMainToCart(${item.id})">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</button>
                    </div>
                </div>
            `).join('');
        }

        function renderSauce() {
            document.getElementById('sauce-menu').innerHTML = sauceItems.map(item => `
                <div class="menu-card sauce-card">
                    <img src="${item.img}">
                    <div class="content">
                        <div class="name">${item.name}</div>
                        <div class="price">${item.price}.-</div>
                        <button class="add-btn" style="background:#2196F3" onclick="addSauceToCart(${item.id})">‡πÄ‡∏û‡∏¥‡πà‡∏°</button>
                    </div>
                </div>
            `).join('');
        }

        function selectSoup(menuId, soupName, extra, el) {
            const parent = el.parentElement;
            parent.querySelectorAll('.soup-btn').forEach(b => b.classList.remove('active'));
            el.classList.add('active');
            el.dataset.extra = extra;

            const spicySection = document.getElementById(`spicy-section-${menuId}`);
            // ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ú‡πá‡∏î‡∏ñ‡πâ‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏ã‡∏∏‡∏õ‡∏°‡∏µ‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤ "‡∏´‡∏°‡πà‡∏≤‡∏•‡πà‡∏≤"
            spicySection.style.display = soupName.includes('‡∏´‡∏°‡πà‡∏≤‡∏•‡πà‡∏≤') ? 'block' : 'none';
        }

        function selectSpicy(el) {
            const parent = el.parentElement;
            parent.querySelectorAll('.sp-btn').forEach(b => b.classList.remove('active'));
            el.classList.add('active');
        }

        function addMainToCart(id) {
            const menu = mainItems.find(m => m.id === id);
            const activeSoupBtn = document.querySelector(`#card-${id} .soup-btn.active`);
            const soupName = activeSoupBtn.innerText.split(' (+')[0];
            const extra = parseInt(activeSoupBtn.dataset.extra || 0);
            
            let finalName = `${menu.name} (${soupName})`;
            if(soupName.includes('‡∏´‡∏°‡πà‡∏≤‡∏•‡πà‡∏≤')) {
                const sp = document.querySelector(`#spicy-section-${id} .sp-btn.active`).innerText;
                finalName += ` [‡πÄ‡∏ú‡πá‡∏î${sp}]`;
            }

            saveToCart(finalName, menu.price + extra);
        }

        function addSauceToCart(id) {
            const sauce = sauceItems.find(s => s.id === id);
            saveToCart(`${sauce.name}`, sauce.price);
        }

        function saveToCart(name, price) {
            cart.push({ name, price, details: [] });
            sessionStorage.setItem('cartItems', JSON.stringify(cart));
            document.getElementById('cart-count').innerText = cart.length;
            
            const alertBox = document.createElement('div');
            alertBox.innerText = "‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏•‡πâ‡∏ß";
            alertBox.style = "position:fixed; top:50%; left:50%; transform:translate(-50%, -50%); background:rgba(0,0,0,0.8); color:white; padding:10px 20px; border-radius:20px; z-index:2000; font-size:12px;";
            document.body.appendChild(alertBox);
            setTimeout(() => alertBox.remove(), 500);
        }

        renderMain();
        renderSauce();
        document.getElementById('cart-count').innerText = cart.length;
    </script>
</body>
</html>