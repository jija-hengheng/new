<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ü•§ ‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* ======================================= */
        /* === BASE STYLES & TYPOGRAPHY === */
        /* ======================================= */
        body {
            font-family: 'Kanit', sans-serif;
            background-color: #f1e9d9; /* ‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏´‡∏•‡∏±‡∏Å: ‡∏Ñ‡∏£‡∏µ‡∏°‡∏≠‡πà‡∏≠‡∏ô */
            color: #333;
            margin: 0;
            padding: 20px 0 100px 0; 
        }
        .container {
            max-width: 650px;
            margin: auto;
            padding: 0 15px;
        }
        h1 {
            color: #940109; /* ‡∏™‡∏µ‡∏´‡∏•‡∏±‡∏Å: ‡πÅ‡∏î‡∏á‡∏≠‡∏°‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•‡πÄ‡∏Ç‡πâ‡∏° */
            text-align: center;
            font-size: 2em;
            margin-bottom: 25px;
            border-bottom: 3px solid #940109;
            padding-bottom: 10px;
        }

        /* ======================================= */
        /* === DRINK GRID LAYOUT (2 columns) === */
        /* ======================================= */
        .drink-grid {
            display: grid;
            grid-template-columns: 1fr 1fr; 
            gap: 15px;
        }

        /* ======================================= */
        /* === DRINK CARD STYLES === */
        /* ======================================= */
        .drink-card {
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            transition: transform 0.2s;
            /* ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡∏∂‡πâ‡∏ô */
            min-height: 280px; 
        }
        .drink-card:hover {
            transform: translateY(-2px);
        }
        .drink-card img {
            /* ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡πÄ‡∏ï‡πá‡∏°‡∏ó‡∏µ‡πà‡∏Ç‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏ö */
            max-width: 100%; 
            height: auto;
            margin: 0 auto 15px auto;
            object-fit: contain;
            /* ‡∏Ç‡∏ô‡∏≤‡∏î‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏±‡∏ö‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡∏∂‡πâ‡∏ô */
            max-height: 150px; 
        }
        .drink-name {
            font-size: 1.1em;
            font-weight: 700;
            color: #333;
            margin-bottom: 5px;
        }
        .drink-price {
            color: #940109; 
            font-size: 1.1em;
            font-weight: 700;
            margin-bottom: 15px;
        }

        /* --- Counter Controls --- */
        .counter-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 10px;
        }
        .counter-btn {
            background-color: #940109; 
            color: #fff;
            border: none;
            border-radius: 50%;
            /* **‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:** ‡∏•‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡∏õ‡∏∏‡πà‡∏° */
            width: 30px; 
            height: 30px;
            /* **‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:** ‡∏•‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç */
            font-size: 1.3em; 
            line-height: 1;
            cursor: pointer;
            transition: background-color 0.2s;
            flex-shrink: 0;
            padding: 0;
        }
        .counter-btn:hover {
            background-color: #7a0006; 
        }
        .item-count {
            /* **‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:** ‡∏•‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç */
            font-size: 1.3em; 
            font-weight: 700;
            margin: 0 15px;
            width: 30px;
            text-align: center;
            color: #333;
        }

        /* ======================================= */
        /* === FOOTER & TOTAL DISPLAY === */
        /* ======================================= */
        .footer-fixed {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: #333; 
            border-top: 3px solid #940109; 
            box-shadow: 0 -4px 10px rgba(0,0,0,0.15);
            padding: 15px 0;
            box-sizing: border-box;
            z-index: 100;
        }
        .summary-bar {
            max-width: 650px;
            margin: auto;
            padding: 0 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .total-display {
            font-size: 1.3em;
            font-weight: 700;
            color: #FFEB3B; 
        }
        .total-label {
            color: #f1e9d9; 
            font-size: 0.9em;
            margin-right: 5px;
        }
        .next-button {
            background-color: #4CAF50; 
            color: #fff;
            border: none;
            border-radius: 8px;
            padding: 12px 25px;
            font-size: 1.1em;
            cursor: pointer;
            transition: 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 700;
        }
        .next-button:hover {
            background-color: #388e3c;
        }
        .next-button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }

        /* Responsive Footer Adjustment */
        @media (max-width: 600px) {
            .summary-bar {
                flex-direction: column;
                gap: 15px;
            }
            .next-button {
                width: 100%;
                justify-content: center;
            }
            .total-display {
                width: 100%;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ü•§ ‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°</h1>
        
        <div class="drink-grid">
            
            <div class="drink-card" data-id="D1" data-name="‡πÇ‡∏Ñ‡πâ‡∏Å 325 ml ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ô‡πâ‡∏≥‡πÅ‡∏Ç‡πá‡∏á" data-price="25">
                <img src="images/coke.png" alt="‡πÇ‡∏Ñ‡πâ‡∏Å 325 ml">
                <div class="drink-name">‡πÇ‡∏Ñ‡πâ‡∏Å 325 ml + ‡∏ô‡πâ‡∏≥‡πÅ‡∏Ç‡πá‡∏á</div>
                <div class="drink-price">25 ‡∏ö.</div>
                <div class="counter-controls">
                    <button class="counter-btn" onclick="updateCount('D1', -1)">-</button>
                    <span class="item-count" id="count_D1">0</span>
                    <button class="counter-btn" onclick="updateCount('D1', 1)">+</button>
                </div>
            </div>

            <div class="drink-card" data-id="D2" data-name="‡∏ô‡πâ‡∏≥‡∏î‡∏∑‡πà‡∏° 550 ml" data-price="10">
                <img src="images/water.png" alt="‡∏ô‡πâ‡∏≥‡∏î‡∏∑‡πà‡∏°">
                <div class="drink-name">‡∏ô‡πâ‡∏≥‡∏î‡∏∑‡πà‡∏° 550 ml</div>
                <div class="drink-price">10 ‡∏ö.</div>
                <div class="counter-controls">
                    <button class="counter-btn" onclick="updateCount('D2', -1)">-</button>
                    <span class="item-count" id="count_D2">0</span>
                    <button class="counter-btn" onclick="updateCount('D2', 1)">+</button>
                </div>
            </div>

            <div class="drink-card" data-id="D3" data-name="‡∏ä‡∏≤‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß" data-price="39">
                <img src="images/greentea.png" alt="‡∏ä‡∏≤‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß">
                <div class="drink-name">‡∏ä‡∏≤‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß</div>
                <div class="drink-price">39 ‡∏ö.</div>
                <div class="counter-controls">
                    <button class="counter-btn" onclick="updateCount('D3', -1)">-</button>
                    <span class="item-count" id="count_D3">0</span>
                    <button class="counter-btn" onclick="updateCount('D3', 1)">+</button>
                </div>
            </div>

            <div class="drink-card" data-id="D4" data-name="‡∏ä‡∏≤‡πÑ‡∏ó‡∏¢" data-price="39">
                <img src="images/thaitea.png" alt="‡∏ä‡∏≤‡πÑ‡∏ó‡∏¢">
                <div class="drink-name">‡∏ä‡∏≤‡πÑ‡∏ó‡∏¢</div>
                <div class="drink-price">39 ‡∏ö.</div>
                <div class="counter-controls">
                    <button class="counter-btn" onclick="updateCount('D4', -1)">-</button>
                    <span class="item-count" id="count_D4">0</span>
                    <button class="counter-btn" onclick="updateCount('D4', 1)">+</button>
                </div>
            </div>

            <div class="drink-card" data-id="D5" data-name="‡πÇ‡∏Å‡πÇ‡∏Å‡πâ" data-price="39">
                <img src="images/cocoa.png" alt="‡πÇ‡∏Å‡πÇ‡∏Å‡πâ">
                <div class="drink-name">‡πÇ‡∏Å‡πÇ‡∏Å‡πâ</div>
                <div class="drink-price">39 ‡∏ö.</div>
                <div class="counter-controls">
                    <button class="counter-btn" onclick="updateCount('D5', -1)">-</button>
                    <span class="item-count" id="count_D5">0</span>
                    <button class="counter-btn" onclick="updateCount('D5', 1)">+</button>
                </div>
            </div>

            <div class="drink-card" data-id="D6" data-name="‡πÄ‡∏Å‡πä‡∏Å‡∏Æ‡∏ß‡∏¢" data-price="39">
                <img src="images/chrysanthemum.png" alt="‡πÄ‡∏Å‡πä‡∏Å‡∏Æ‡∏ß‡∏¢">
                <div class="drink-name">‡πÄ‡∏Å‡πä‡∏Å‡∏Æ‡∏ß‡∏¢</div>
                <div class="drink-price">39 ‡∏ö.</div>
                <div class="counter-controls">
                    <button class="counter-btn" onclick="updateCount('D6', -1)">-</button>
                    <span class="item-count" id="count_D6">0</span>
                    <button class="counter-btn" onclick="updateCount('D6', 1)">+</button>
                </div>
            </div>

        </div>
    </div>

    <div class="footer-fixed">
        <div class="summary-bar">
            <div class="total-display">
                <span class="total-label">‡∏£‡∏ß‡∏°‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°:</span> <span id="grand-total">0</span> ‡∏ö‡∏≤‡∏ó
            </div>
            <button class="next-button" id="next-button" onclick="addToCartAndProceed()" disabled>
                ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤ & ‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î
            </button>
        </div>
    </div>

<script>
    // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (‡∏î‡∏∂‡∏á‡∏°‡∏≤‡∏à‡∏≤‡∏Å data-attributes ‡∏ö‡∏ô HTML)
    const DRINKS = Array.from(document.querySelectorAll('.drink-card')).map(card => ({
        id: card.getAttribute('data-id'),
        name: card.getAttribute('data-name'),
        price: parseInt(card.getAttribute('data-price')),
        count: 0 // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÄ‡∏õ‡πá‡∏ô 0
    }));

    // ------------------ 1. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤ ------------------
    function updateCount(id, change) {
        const drink = DRINKS.find(d => d.id === id);
        
        if (drink) {
            let newCount = drink.count + change;
            
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤ 0
            if (newCount < 0) newCount = 0;
            
            drink.count = newCount;
            
            // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï UI
            document.getElementById(`count_${id}`).innerText = newCount;
        }

        calculateTotal();
    }

    // ------------------ 2. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ------------------
    function calculateTotal() {
        const total = DRINKS.reduce((sum, drink) => sum + (drink.count * drink.price), 0);
        document.getElementById('grand-total').innerText = total.toLocaleString();

        const nextButton = document.getElementById('next-button');
        if (total > 0) {
            nextButton.innerText = `‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤ & ‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î (${total.toLocaleString()} ‡∏ö.)`;
            nextButton.disabled = false;
        } else {
            nextButton.innerText = `‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤ & ‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î`;
            nextButton.disabled = true;
        }
    }

    // ------------------ 3. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏Ç‡πâ‡∏≤‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏£‡∏∏‡∏õ (‡πÉ‡∏ä‡πâ sessionStorage) ------------------
    function addToCartAndProceed() {
        const selectedDrinks = DRINKS.filter(d => d.count > 0);

        // 1. ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤
        const drinkOrderDetails = selectedDrinks.map(drink => ({
            id: drink.id,
            name: `${drink.name} x ${drink.count}`,
            price: drink.price,
            count: drink.count,
            type: 'Drink'
        }));
        
        // 2. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ä‡∏∏‡∏î‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°‡∏£‡∏ß‡∏°‡πÄ‡∏õ‡πá‡∏ô 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤
        const totalOrderPrice = drinkOrderDetails.reduce((sum, item) => sum + (item.price * item.count), 0);

        const newDrinkOrder = {
            // ‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏ß‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤
            name: `ü•§ ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°‡∏£‡∏ß‡∏° (${selectedDrinks.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)`,
            price: totalOrderPrice,
            count: 1, // ‡∏ô‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô 1 ‡∏ä‡∏∏‡∏î
            details: drinkOrderDetails,
            isSukiSet: false,
            isNoodleSet: false,
            isDrinkSet: true
        };

        // 3. ‡∏î‡∏∂‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏à‡∏≤‡∏Å sessionStorage
        let cartItems = JSON.parse(sessionStorage.getItem('cartItems') || '[]');
        
        // 4. ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ä‡∏∏‡∏î‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°‡πÉ‡∏´‡∏°‡πà‡∏•‡∏á‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤
        cartItems.push(newDrinkOrder);
        
        // 5. ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏ó‡∏µ‡πà sessionStorage
        sessionStorage.setItem('cartItems', JSON.stringify(cartItems));
        
        alert('‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ "‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°" ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡πÅ‡∏•‡πâ‡∏ß! ‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î...');

        // 6. ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏£‡∏∏‡∏õ
        window.location.href = 'summary.html';
    }

    // 4. ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤
    document.addEventListener('DOMContentLoaded', () => {
        calculateTotal();
    });
</script>
</body>
</html>