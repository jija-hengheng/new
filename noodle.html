<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏™‡πâ‡∏ô - ‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-red: #940109;
            --bg-cream: #f1e9d9;
            --card-white: #ffffff;
            --text-main: #333;
        }

        body {
            font-family: 'Kanit', sans-serif;
            background-color: var(--bg-cream);
            margin: 0;
            padding-bottom: 100px;
            color: var(--text-main);
        }

        .header {
            background-color: var(--primary-red);
            color: var(--bg-cream);
            padding: 15px;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .container {
            padding: 10px;
            max-width: 600px;
            margin: auto;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            padding: 5px;
        }

        .menu-card {
            background: var(--card-white);
            border-radius: 15px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            box-shadow: 0 4px 8px rgba(0,0,0,0.05);
            cursor: pointer;
        }

        .item-img {
            width: 100%;
            aspect-ratio: 1/1;
            object-fit: cover;
            background-color: #eee;
        }

        .item-info {
            padding: 10px;
            flex-grow: 1;
        }

        .item-name {
            font-size: 0.9rem;
            font-weight: 500;
            line-height: 1.2;
            margin-bottom: 5px;
            min-height: 2.4em;
        }

        .item-price {
            color: var(--primary-red);
            font-weight: 600;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: flex-end;
        }

        .modal-content {
            background: #fff;
            width: 100%;
            border-radius: 20px 20px 0 0;
            padding: 20px;
            box-sizing: border-box;
            animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }

        .opt-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .addon-counter {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .btn-round {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 1px solid var(--primary-red);
            background: #fff;
            color: var(--primary-red);
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .btn-confirm {
            background: var(--primary-red);
            color: var(--bg-cream);
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            margin-top: 15px;
        }

        /* ‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏≠‡∏¢‡∏ó‡∏£‡∏á‡∏Å‡∏•‡∏°‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å */
        .fab-cart {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 65px;
            height: 65px;
            background: var(--primary-red);
            color: var(--bg-cream);
            border-radius: 50%;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            text-decoration: none;
            z-index: 900;
            border: 2px solid var(--bg-cream);
        }
        .fab-cart b { font-size: 1.1rem; }
        .fab-cart span { font-size: 0.6rem; }
    </style>
</head>
<body>

    <div class="header">
        <h2 style="margin:0">ü•¢ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h2>
    </div>

    <div class="container">
        <div class="menu-grid">
            <div class="menu-card" onclick="openOptions('s1', '‡∏™‡∏∏‡∏Å‡∏µ‡πâ‡πÅ‡∏´‡πâ‡∏á‡∏ß‡∏∏‡πâ‡∏ô‡πÄ‡∏™‡πâ‡∏ô‡πÑ‡∏Ç‡πà‡∏Ç‡πâ‡∏ô', 59, 'suki')">
                <img src="images/suki-S.png" class="item-img">
                <div class="item-info"><div class="item-name">‡∏™‡∏∏‡∏Å‡∏µ‡πâ‡πÅ‡∏´‡πâ‡∏á‡∏ß‡∏∏‡πâ‡∏ô‡πÄ‡∏™‡πâ‡∏ô‡πÑ‡∏Ç‡πà‡∏Ç‡πâ‡∏ô</div><div class="item-price">59.-</div></div>
            </div>
            <div class="menu-card" onclick="openOptions('s2', '‡∏™‡∏∏‡∏Å‡∏µ‡πâ x ‡∏´‡∏°‡∏π‡∏ô‡∏∏‡πà‡∏°', 69, 'suki')">
                <img src="images/suki2.jpg" class="item-img">
                <div class="item-info"><div class="item-name">‡∏™‡∏∏‡∏Å‡∏µ‡πâ‡∏ß‡∏∏‡πâ‡∏ô‡πÄ‡∏™‡πâ‡∏ô‡πÑ‡∏Ç‡πà‡∏Ç‡πâ‡∏ô x ‡∏´‡∏°‡∏π‡∏ô‡∏∏‡πà‡∏°</div><div class="item-price">69.-</div></div>
            </div>
            <div class="menu-card" onclick="openOptions('s3', '‡∏™‡∏∏‡∏Å‡∏µ‡πâ x ‡∏´‡∏°‡∏π‡∏ô‡∏∏‡πà‡∏° ‡πÉ‡∏™‡πà‡∏ú‡∏±‡∏Å', 69, 'suki')">
                <img src="images/suki3.jpg" class="item-img">
                <div class="item-info"><div class="item-name">‡∏™‡∏∏‡∏Å‡∏µ‡πâ‡∏ß‡∏∏‡πâ‡∏ô‡πÄ‡∏™‡πâ‡∏ô‡πÑ‡∏Ç‡πà‡∏Ç‡πâ‡∏ô x ‡∏´‡∏°‡∏π‡∏ô‡∏∏‡πà‡∏° ‡πÉ‡∏™‡πà‡∏ú‡∏±‡∏Å</div><div class="item-price">69.-</div></div>
            </div>
            <div class="menu-card" onclick="openOptions('s4', '‡∏™‡∏∏‡∏Å‡∏µ‡πâ x ‡∏´‡∏°‡∏π‡∏ô‡∏∏‡πà‡∏° x ‡∏´‡∏°‡∏∂‡∏Å‡∏Å‡∏£‡∏≠‡∏ö', 79, 'suki')">
                <img src="images/suki-xl.png" class="item-img">
                <div class="item-info"><div class="item-name">‡∏™‡∏∏‡∏Å‡∏µ‡πâ‡πÑ‡∏Ç‡πà‡∏Ç‡πâ‡∏ô x ‡∏´‡∏°‡∏π‡∏ô‡∏∏‡πà‡∏° x ‡∏´‡∏°‡∏∂‡∏Å‡∏Å‡∏£‡∏≠‡∏ö</div><div class="item-price">79.-</div></div>
            </div>
            <div class="menu-card" onclick="openOptions('n1', '‡∏´‡∏°‡∏µ‡πà‡πÑ‡∏Å‡πà‡∏â‡∏µ‡∏Å', 50, 'noodle')">
                <img src="images/mhee-kai.png" class="item-img">
                <div class="item-info"><div class="item-name">‡∏´‡∏°‡∏µ‡πà‡πÑ‡∏Å‡πà‡∏â‡∏µ‡∏Å</div><div class="item-price">50.-</div></div>
            </div>
        </div>
    </div>

    <div id="optModal" class="modal" onclick="if(event.target == this) closeModal()">
        <div class="modal-content">
            <h3 id="modalTitle" style="margin-top:0">‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏°‡∏ô‡∏π</h3>
            <div id="optionList"></div>
            <button class="btn-confirm" onclick="addToCart()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤ - <span id="tempPrice">0</span>.-</button>
            <button onclick="closeModal()" style="width:100%; background:none; border:none; color:#888; margin-top:10px;">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
        </div>
    </div>

    <a href="summary.html" id="fabCart" class="fab-cart">
        <b id="fabTotal">0</b>
        <span id="fabCount">0 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</span>
    </a>

    <script>
        let currentItem = {};
        let cart = JSON.parse(sessionStorage.getItem('cartItems') || '[]');

        function openOptions(id, name, price, type) {
            currentItem = { id, name, price, options: [], type: type };
            document.getElementById('modalTitle').innerText = name;
            document.getElementById('tempPrice').innerText = price;
            
            const list = document.getElementById('optionList');
            list.innerHTML = '';

            if(type === 'suki') {
                const sukiOpts = [{n:'+‡πÑ‡∏Ç‡πà', p:10}, {n:'+‡∏ä‡∏µ‡∏™‡∏≠‡∏≤‡∏ö', p:20}];
                sukiOpts.forEach(opt => {
                    list.innerHTML += `
                        <label class="opt-row">
                            <span>${opt.n} (+${opt.p}.-)</span>
                            <input type="checkbox" style="width:20px; height:20px; accent-color:var(--primary-red)" 
                                   onchange="updateSukiOpt('${opt.n}', ${opt.p}, this)">
                        </label>`;
                });
            } else {
                list.innerHTML = `
                    <div class="opt-row">
                        <div>
                            <span>‡∏ô‡πâ‡∏≥‡∏û‡∏£‡∏¥‡∏Å‡∏Å‡∏≤‡∏Å‡∏´‡∏°‡∏π</span><br>
                            <small style="color:#888">(+10.- ‡∏ï‡πà‡∏≠‡∏´‡πà‡∏≠)</small>
                        </div>
                        <div class="addon-counter">
                            <div class="btn-round" onclick="updateAddonCount(-1)">-</div>
                            <span id="addonQty" style="font-weight:600; min-width:20px; text-align:center">0</span>
                            <div class="btn-round" onclick="updateAddonCount(1)">+</div>
                        </div>
                    </div>`;
                currentItem.addonQty = 0;
            }
            document.getElementById('optModal').style.display = 'flex';
        }

        function updateSukiOpt(name, price, chk) {
            let currentTotal = parseInt(document.getElementById('tempPrice').innerText);
            if(chk.checked) {
                currentTotal += price;
                currentItem.options.push({n: name, p: price});
            } else {
                currentTotal -= price;
                currentItem.options = currentItem.options.filter(o => o.n !== name);
            }
            document.getElementById('tempPrice').innerText = currentTotal;
        }

        function updateAddonCount(change) {
            if(currentItem.addonQty + change < 0) return;
            currentItem.addonQty += change;
            document.getElementById('addonQty').innerText = currentItem.addonQty;
            const newTotal = currentItem.price + (currentItem.addonQty * 10);
            document.getElementById('tempPrice').innerText = newTotal;
        }

        function addToCart() {
            const finalPrice = parseInt(document.getElementById('tempPrice').innerText);
            let details = [];

            if (currentItem.type === 'suki') {
                details.push({ name: currentItem.name, price: currentItem.price, count: 1, type: 'Main' });
                currentItem.options.forEach(opt => {
                    details.push({ name: opt.n, price: opt.p, count: 1, type: 'Addon' });
                });
            } else {
                details.push({ name: "‡∏´‡∏°‡∏µ‡πà‡πÑ‡∏Å‡πà‡∏â‡∏µ‡∏Å", price: 50, count: 1, type: 'Main' });
                if (currentItem.addonQty > 0) {
                    details.push({ name: "‡∏ô‡πâ‡∏≥‡∏û‡∏£‡∏¥‡∏Å‡∏Å‡∏≤‡∏Å‡∏´‡∏°‡∏π", price: 10, count: currentItem.addonQty, type: 'Addon' });
                }
            }
            
            const newOrder = {
                name: currentItem.name + (currentItem.type === 'noodle' && currentItem.addonQty > 0 ? ` (+‡∏ô‡πâ‡∏≥‡∏û‡∏£‡∏¥‡∏Å ${currentItem.addonQty} ‡∏´‡πà‡∏≠)` : ''),
                price: finalPrice,
                count: 1,
                details: details,
                isSukiSet: currentItem.type === 'suki',
                isNoodleSet: currentItem.type === 'noodle'
            };

            cart.push(newOrder);
            sessionStorage.setItem('cartItems', JSON.stringify(cart));
            updateUI();
            closeModal();
        }

        function updateUI() {
            if(cart.length > 0) {
                document.getElementById('fabCart').style.display = 'flex';
                const total = cart.reduce((sum, item) => sum + item.price, 0);
                document.getElementById('fabTotal').innerText = total;
                document.getElementById('fabCount').innerText = cart.length + ' ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£';
            }
        }

        function closeModal() { document.getElementById('optModal').style.display = 'none'; }
        updateUI();
    </script>
</body>
</html>